<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="format-detection" content="telephone=no">
	<title>河湖长制</title>
	<link rel="stylesheet" type="text/css" href="../../css/mui.min.css" />
	<link rel="stylesheet" type="text/css" href="../../js/openlayers/v6.4.3-dist/ol.css" />
	<link rel="stylesheet" type="text/css" href="../../css/ruralWater/ifont.css" />
	<link rel="stylesheet" type="text/css" href="../../css/ruralWater/base.css" />
	<link rel="stylesheet" type="text/css" href="../../css/ruralWater/main.css" />
	<script src="../../js/jquery-1.11.1.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="../../js/mui.min.js"></script>
	<script src="../../js/openlayers/v6.4.3-dist/ol.js"></script>
	<style type="text/css">
		.list_cont_box .cont_item_box {
			width: 23%;
			align-items: flex-start;
		}

		.list_cont_box .cont_item_box .list_span {
			color: #666666;
		}

		.right {
			position: absolute;
			right: 0.2rem;
		}
		
		.gray{
		  /*grayscale(val):val值越大灰度就越深*/
		  -webkit-filter: grayscale(100%);
		  -moz-filter: grayscale(100%);
		  -ms-filter: grayscale(100%);
		  -o-filter: grayscale(100%);
		  filter: grayscale(100%);
		  filter: gray;
		}
	</style>
	<script>
		//计算根节点HTML的字体大小
		function resizeRoot(width) {
			var deviceWidth = document.documentElement.clientWidth,
				num = width,
				num1 = num / 100;
			if (deviceWidth > num) {
				deviceWidth = num;
			}
			document.documentElement.style.fontSize = deviceWidth / num1 + "px";
		}
		//根节点HTML的字体大小初始化
		resizeRoot(750);
		window.onresize = function () {
			resizeRoot(750);
		};
	</script>
</head>

<body>
	<div class="mui-content">
		<header class="header pp">
			<i class="mui-action-back iconfont icon-fanhui1 fl"></i>
			<span>河湖长制</span>
		</header>
		<div class="section">
			<div class="list_box">
				<ul class="list_ul">
					<!-- <li class="list_li">
						<div class="list_title">工作信息</div>
						<div class="list_cont_box">
							<a href="javascript:void(0);" onclick="jump_new('work_trend.html')" class="cont_item_box">
								<div>
									<img class="list_img" src="../../images/riverChief/new/work.png">
									<span class="list_span">工作动态</span>
								</div>
							</a>
							<a href="javascript:void(0);" onclick="jump_new('policy.html')" class="cont_item_box">
								<div>
									<img class="list_img" src="../../images/riverChief/new/policy.png">
									<span class="list_span">政策制度</span>
								</div>
							</a>
						</div>
					</li>
					<li class="list_li">
						<div class="list_title">基础信息</div>
						<div class="list_cont_box">
							<a href="javascript:void(0);" class="cont_item_box"
								onclick="jump_new('river_chief_name.html')">
								<div>
									<img class="list_img" src="../../images/riverChief/new/chief.png">
									<span class="list_span">河湖长名录</span>
								</div>
							</a>
							<a href="javascript:void(0);" class="cont_item_box" onclick="jump_new()">
								<div>
									<img class="list_img" src="../../images/riverChief/new/river.png">
									<span class="list_span">河流/湖泊<br />名录</span>
								</div>
							</a>
							<a href="javascript:void(0);" class="cont_item_box" onclick="jump_new()">
								<div>
									<img class="list_img" src="../../images/riverChief/new/tbyhyd.png">
									<span class="list_span">一河(湖)<br />一挡</span>
								</div>
							</a>
							<a href="javascript:void(0);" class="cont_item_box" onclick="jump_new('river_policy.html')">
								<div>
									<img class="list_img" src="../../images/riverChief/new/aRiver.png">
									<span class="list_span">一河(湖)<br />一策<br />(正在修订)</span>
								</div>
							</a>
						</div>
					</li>
					<li class="list_li">
						<div class="list_title">河湖长制地图</div>
						<div class="list_cont_box">
							<a href="javascript:void(0);" onclick="jump_new('map.html')" class="cont_item_box">
								<div>
									<img class="list_img" src="../../images/riverChief/new/map.png">
									<span class="list_span">河湖长制<br />“一张图”</span>
								</div>
							</a>
							<a href="javascript:void(0);" onclick="jump_new('thematic_map.html')" class="cont_item_box">
								<div>
									<img class="list_img" src="../../images/riverChief/new/topic.png">
									<span class="list_span">河长责任<br />专题图</span>
								</div>
							</a>
						</div>
					</li>
					<li class="list_li">
						<div class="list_title">巡河信息</div>
						<div class="list_cont_box">
							<a href="javascript:void(0);" onclick="jump_new('riverPatrol.html')" class="cont_item_box">
								<div>
									<img class="list_img" src="../../images/riverChief/new/riverPatrol.png">
									<span class="list_span">巡河管理</span>
								</div>
							</a>
							<a href="javascript:void(0);" onclick="jump_new('event.html')" class="cont_item_box">
								<div>
									<img class="list_img" src="../../images/riverChief/new/case.png">
									<span class="list_span">巡查情况</span>
								</div>
							</a>
							<a href="javascript:void(0);" onclick="jump_new('riverPatrol_special.html')"
								class="cont_item_box">
								<div>
									<img class="list_img" src="../../images/riverChief/new/column.png">
									<span class="list_span">巡河专栏</span>
								</div>
							</a>
							<a href="javascript:void(0);" onclick="jump_new('riverPatrol_statis.html')"
								class="cont_item_box">
								<div>
									<img class="list_img" src="../../images/riverChief/new/statistics.png">
									<span class="list_span">巡河统计</span>
								</div>
							</a>
						</div>
					</li>
					<li class="list_li">
						<div class="list_title">清“四乱”</div>
						<div class="list_cont_box">
							<a href="javascript:void(0);" onclick="jump_new('clear_four_mess.html')"
								class="cont_item_box">
								<div>
									<img class="list_img" src="../../images/riverChief/new/four.png">
									<span class="list_span">“四乱”<br />问题表</span>
								</div>
							</a>
							<a href="javascript:void(0);" onclick="jump_new('clear_fm_static.html')"
								class="cont_item_box">
								<div>
									<img class="list_img" src="../../images/riverChief/new/chart.png">
									<span class="list_span">统计图表</span>
								</div>
							</a>
						</div>
					</li>
					<li class="list_li">
						<div class="list_title">其他</div>
						<div class="list_cont_box">
							<a href="javascript:void(0);" onclick="jump_new()" class="cont_item_box">
								<div>
									<img class="list_img" src="../../images/riverChief/new/quality.png">
									<span class="list_span">水质断面图</span>
								</div>
							</a>
							<a href="javascript:void(0);" onclick="jump_new()" class="cont_item_box">
								<div>
									<img class="list_img" src="../../images/riverChief/new/report.png">
									<span class="list_span">群众举报问题</span>
								</div>
							</a>
							<a href="javascript:void(0);" class="cont_item_box" onclick="jump_new()">
								<div>
									<img class="list_img" src="../../images/riverChief/new/tbfbdb.png">
									<span class="list_span">分办/督办</span>
								</div>
							</a>
						</div>
					</li> -->
				</ul>
			</div>
		</div>
	</div>

	<!-- 当前手机位置 -->
	<div id="marker" class="marker"></div>
</body>
<script src="../../js/refresh.js" type="text/javascript" charset="utf-8"></script>
<script src="../../js/ruralWater/jump_page.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
	//二级村列表
	var root = localStorage.getItem("str_url");
	if (root == "" || root == undefined || root == null) {
		mui.openWindow({
			url: 'login.html?cid=1', //通过URL传参
			id: 'login.html?cid=1', //通过URL传参
		})
	}
	var token = localStorage.getItem("token");
	var data_info = {};
	mui.plusReady(function() {
		var self = plus.webview.currentWebview();
		plus.nativeUI.showWaiting("加载中...");
		data_info.token = token;
		list(data_info);
	});
	function list(data_info) {
		var _url = root + "api/v3/riverchief/riverchieflakechief/nav_list_new";
		console.log(_url);
		console.log(JSON.stringify(data_info));
		mui.ajax(_url, {
			data: data_info,
			datatype: 'json', //服务器返回json格式数据
			type: 'post', //HTTP请求类型
			success: function(res) {
				console.log(JSON.stringify(res))
				plus.nativeUI.closeWaiting();
				if (res.code == 1) {
					if(res.data.length>0){
						setList(res.data)
					}else{
						mui.toast("暂无模块开启");
					}
				}else{
					mui.toast(res.msg);
				}
			},
			error: function(xhr, type, errorThrown) {
				console.log("接口获取请求失败");
				plus.nativeUI.closeWaiting();
			}
		})
	}
	
	function setList(listBox){
		for (let index in listBox) {
			
			var itmeHtml = "";
			for (let i in listBox[index].list) {
				var jump_item = listBox[index].list[i].uri =='#' ? " " : `jump_new('${listBox[index].list[i].uri}')`;
				var item = `<a href="javascript:void(0);" onclick="${jump_item}" class="cont_item_box">
								<div>
									<img class="list_img ${listBox[index].list[i].uri =='#'? 'gray' :''}" src="../../images/riverChief/new/${listBox[index].list[i].imageName}">
									<span class="list_span">${listBox[index].list[i].name}</span>
								</div>
							</a>`;
				itmeHtml+=item;
			}
			var list = `<li class="list_li">
							<div class="list_title">${listBox[index].name}</div>
							<div class="list_cont_box">
								${itmeHtml}
							</div>
						</li>`
			
			$(".list_ul").append(list);
		}
		
	}
</script>
</html>